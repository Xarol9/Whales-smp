<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHALES HUB | ULTRA EDITION</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f2ff; --secondary: #7000ff; --danger: #ff2a6d;
            --bg: #05050a; --card-bg: rgba(20, 20, 35, 0.6); --border: rgba(0, 242, 255, 0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { 
            background: var(--bg); color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; 
            height: 100vh; overflow: hidden;
            background-image: radial-gradient(circle at 50% -20%, #1a1a35 0%, var(--bg) 100%);
        }

        /* HEADER */
        header {
            height: 80px; background: rgba(0,0,0,0.7); backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--border); display: flex;
            justify-content: space-between; align-items: center; padding: 0 40px;
        }
        .profile-box { display: flex; align-items: center; gap: 15px; background: rgba(255,255,255,0.03); padding: 8px 15px; border-radius: 15px; border: 1px solid var(--border); }

        /* GRID SYSTEM */
        .app-container { display: grid; grid-template-columns: 300px 1fr 320px; height: calc(100vh - 80px); padding: 25px; gap: 25px; }

        .glass-panel { background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid var(--border); border-radius: 30px; padding: 25px; display: flex; flex-direction: column; }

        /* FEED */
        .feed { overflow-y: auto; scroll-behavior: smooth; padding-right: 10px; }
        .feed::-webkit-scrollbar { width: 4px; }
        .feed::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

        .post-card {
            background: rgba(255,255,255,0.02); border: 1px solid var(--border);
            padding: 30px; border-radius: 25px; margin-bottom: 20px; position: relative;
            animation: fadeIn 0.4s ease forwards;
        }
        .post-card:hover { border-color: var(--primary); box-shadow: 0 10px 30px rgba(0,242,255,0.05); transform: translateY(-3px); }

        /* UI ELEMENTS */
        .nav-btn {
            padding: 15px 20px; margin-bottom: 10px; border-radius: 15px; cursor: pointer;
            font-weight: 700; color: #555; transition: 0.3s; display: flex; align-items: center; gap: 12px;
        }
        .nav-btn.active { background: rgba(0, 242, 255, 0.1); color: var(--primary); box-shadow: inset 4px 0 0 var(--primary); }

        .btn-action {
            background: var(--primary); border: none; padding: 18px; border-radius: 18px;
            font-weight: 800; cursor: pointer; color: #000; text-transform: uppercase; letter-spacing: 1px;
        }
        .btn-action:hover { box-shadow: 0 0 25px rgba(0,242,255,0.4); transform: scale(1.02); }

        /* MODAL */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; z-index: 999; backdrop-filter: blur(10px); }
        .modal-content { background: #0a0a1a; padding: 40px; border-radius: 35px; width: 450px; border: 1px solid var(--primary); }

        input, textarea, select { width: 100%; background: #000; border: 1px solid #222; padding: 15px; border-radius: 15px; color: #fff; margin-bottom: 15px; font-size: 0.9rem; }
        input:focus { border-color: var(--primary); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<script src="news-data.js"></script>

<header>
    <div style="display: flex; align-items: center; gap: 20px;">
        <a href="index.html" style="text-decoration:none; color:#555; font-weight:800; font-size:0.8rem;">‚Üê –ì–û–õ–û–í–ù–ê</a>
        <h1 style="font-size: 1.4rem; letter-spacing: 4px; font-weight: 800; color: var(--primary);">WHALES HUB</h1>
    </div>

    <div class="profile-box">
        <div style="text-align: right;">
            <p id="p-name" style="font-weight: 800; font-size: 0.9rem;">Steve</p>
            <p style="font-size: 0.6rem; color: #00ff88; font-weight: 800;">CONNECTED</p>
        </div>
        <img id="p-head" src="" style="width: 45px; height: 45px; border-radius: 12px; border: 2px solid var(--primary);">
    </div>
</header>

<div class="app-container">
    <aside class="glass-panel">
        <p style="font-size: 0.6rem; color: #444; margin-bottom: 20px; letter-spacing: 2px; font-weight: 800;">NAVIGATOR</p>
        <div class="nav-btn active" onclick="App.tab('news', this)">üì¢ –ù–æ–≤–∏–Ω–∏</div>
        <div class="nav-btn" onclick="App.tab('update', this)">‚ú® –û–Ω–æ–≤–ª–µ–Ω–Ω—è</div>
        <div class="nav-btn" onclick="App.tab('project', this)">üèóÔ∏è –ü—Ä–æ—î–∫—Ç–∏</div>
        <div class="nav-btn" onclick="App.tab('idea', this)">üí° –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó</div>
        
        <button class="btn-action" onclick="App.openModal()" style="margin-top: auto;">+ –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–ø–∏—Å</button>
    </aside>

    <main class="feed" id="feed-root"></main>

    <aside class="glass-panel">
        <p style="font-size: 0.6rem; color: #444; margin-bottom: 20px; letter-spacing: 2px; font-weight: 800;">STATISTICS</p>
        <div style="background: rgba(255,255,255,0.02); padding: 20px; border-radius: 20px;">
            <p style="font-size: 0.7rem; color: #666;">–ê–ö–¢–ò–í–ù–Ü–°–¢–¨ –•–ê–ë–£</p>
            <h2 id="total-count" style="font-size: 2.5rem; color: var(--primary);">0</h2>
        </div>
        <div style="margin-top: auto; padding: 20px; background: rgba(112,0,255,0.05); border-radius: 20px; border: 1px solid rgba(112,0,255,0.1);">
            <p style="font-size: 0.6rem; color: var(--secondary); font-weight: 800;">BUILD STATUS</p>
            <p style="font-size: 0.8rem; margin-top: 5px;">–í—Å—ñ –º–æ–¥—É–ª—ñ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ.</p>
        </div>
    </aside>
</div>

<div class="modal-overlay" id="modal-box">
    <div class="modal-content">
        <h2 style="margin-bottom: 20px; color: var(--primary);">–ù–û–í–ò–ô –ó–ê–ü–ò–°</h2>
        <select id="f-type" onchange="App.toggleExtra()">
            <option value="news">üì¢ –ù–æ–≤–∏–Ω–∞</option>
            <option value="update">‚ú® –û–Ω–æ–≤–ª–µ–Ω–Ω—è</option>
            <option value="project">üèóÔ∏è –ü—Ä–æ—î–∫—Ç</option>
            <option value="idea">üí° –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è</option>
        </select>
        <input type="text" id="f-title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
        <textarea id="f-desc" rows="4" placeholder="–í–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..."></textarea>
        
        <div id="f-extra" style="display: none;">
            <input type="number" id="f-prog" placeholder="–í—ñ–¥—Å–æ—Ç–æ–∫ –ø—Ä–æ–≥—Ä–µ—Å—É (0-100)">
            <input type="text" id="f-coords" placeholder="–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (–Ω–∞–ø—Ä. X: 100, Z: -200)">
        </div>

        <button class="btn-action" style="width: 100%;" onclick="App.publish()">–û–ü–£–ë–õ–Ü–ö–£–í–ê–¢–ò</button>
        <button onclick="App.closeModal()" style="width: 100%; background: none; border: none; color: #444; margin-top: 15px; cursor: pointer; font-weight: 700;">–°–ö–ê–°–£–í–ê–¢–ò</button>
    </div>
</div>

<script>
const App = {
    key: 'whales_ultra_db',
    userKey: 'playerNick',
    currentTab: 'news',
    allData: [],

    init() {
        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
        const nick = localStorage.getItem(this.userKey) || "Steve";
        document.getElementById('p-name').innerText = nick;
        document.getElementById('p-head').src = `https://mc-heads.net/avatar/${nick}/100`;

        this.sync();
    },

    sync() {
        // –õ–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ
        const local = JSON.parse(localStorage.getItem(this.key) || "[]");
        
        // –û—Ñ—ñ—Ü—ñ–π–Ω—ñ –¥–∞–Ω—ñ (–±–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞)
        let official = [];
        if (window.WHALES_STORAGE && window.WHALES_STORAGE.posts) {
            official = window.WHALES_STORAGE.posts;
        }

        this.allData = [...local, ...official].sort((a, b) => b.id - a.id);
        this.render();
    },

    render(filtered = null) {
        const root = document.getElementById('feed-root');
        root.innerHTML = '';
        
        const source = filtered || this.allData.filter(item => item.type === this.currentTab);
        document.getElementById('total-count').innerText = this.allData.length;

        if (source.length === 0) {
            root.innerHTML = `<div style="text-align:center; padding-top:100px; color:#222; font-weight:800; font-size:2rem; letter-spacing:10px;">EMPTY</div>`;
            return;
        }

        source.forEach(item => {
            const card = document.createElement('div');
            card.className = 'post-card';
            card.innerHTML = `
                <div style="display:flex; justify-content:space-between; margin-bottom:15px; font-family:'JetBrains Mono'; font-size:0.7rem; color:#444;">
                    <span style="color:var(--primary); font-weight:800;">#${item.type.toUpperCase()}</span>
                    <span>${item.date} // ${item.author}</span>
                </div>
                <h2 style="margin-bottom:10px; font-size:1.4rem;">${item.title}</h2>
                <p style="color:#888; line-height:1.6; font-size:0.9rem;">${item.desc.replace(/\n/g, '<br>')}</p>
                
                ${item.type === 'project' ? `
                    <div style="margin-top:20px; background:rgba(0,0,0,0.3); padding:15px; border-radius:15px;">
                        <div style="display:flex; justify-content:space-between; font-size:0.6rem; color:var(--primary); margin-bottom:8px;">
                            <span>PROGRESS</span><span>${item.prog}%</span>
                        </div>
                        <div style="height:6px; background:#000; border-radius:10px; overflow:hidden;">
                            <div style="width:${item.prog}%; height:100%; background:linear-gradient(90deg, var(--primary), var(--secondary)); shadow: 0 0 10px var(--primary);"></div>
                        </div>
                        <p style="font-size:0.65rem; color:#333; margin-top:10px; font-family:'JetBrains Mono';">LOC: ${item.coords}</p>
                    </div>
                ` : ''}
            `;
            root.appendChild(card);
        });
    },

    publish() {
        const title = document.getElementById('f-title').value;
        const desc = document.getElementById('f-desc').value;
        
        if (!title || !desc) return alert("–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è!");

        const newPost = {
            id: Date.now(),
            author: document.getElementById('p-name').innerText,
            type: document.getElementById('f-type').value,
            title, desc,
            prog: document.getElementById('f-prog').value || 0,
            coords: document.getElementById('f-coords').value || "Unknown",
            date: new Date().toLocaleDateString('uk-UA')
        };

        const local = JSON.parse(localStorage.getItem(this.key) || "[]");
        local.unshift(newPost);
        localStorage.setItem(this.key, JSON.stringify(local));

        // –û—á–∏—â–µ–Ω–Ω—è —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
        document.getElementById('f-title').value = '';
        document.getElementById('f-desc').value = '';
        this.sync();
        this.closeModal();
    },

    search(val) {
        const query = val.toLowerCase();
        const filtered = this.allData.filter(i => 
            i.type === this.currentTab && 
            (i.title.toLowerCase().includes(query) || i.desc.toLowerCase().includes(query))
        );
        this.render(filtered);
    },

    tab(type, el) {
        this.currentTab = type;
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        el.classList.add('active');
        this.render();
    },

    openModal() { document.getElementById('modal-box').style.display = 'flex'; },
    closeModal() { document.getElementById('modal-box').style.display = 'none'; },
    toggleExtra() { document.getElementById('f-extra').style.display = document.getElementById('f-type').value === 'project' ? 'block' : 'none'; }
};

window.onload = () => App.init();
</script>

</body>
</html>

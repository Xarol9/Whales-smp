<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whales SMP | Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --p: #00d2ff;
            --bg: #030406;
            --card: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.08);
            --ts: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–ª—è –±–µ–∑–ø–µ–∫–∏ */
        body {
            margin: 0; padding: 0;
            background: var(--bg); color: white;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-image: radial-gradient(circle at 50% -20%, #1a2a3a 0%, #030406 100%);
            min-height: 100vh; overflow-x: hidden;
            display: none; 
        }

        /* --- –í–ï–†–•–ù–Ø –ù–ê–í–Ü–ì–ê–¶–Ü–Ø --- */
        header {
            position: sticky; top: 0; z-index: 1000;
            backdrop-filter: blur(20px);
            background: rgba(3, 4, 6, 0.8);
            border-bottom: 1px solid var(--border);
        }

        .nav-container {
            display: flex; justify-content: space-between; align-items: center;
            height: 70px; max-width: 1400px; margin: 0 auto; padding: 0 30px;
        }

        .logo { font-weight: 800; font-size: 1.2rem; letter-spacing: -1px; text-transform: uppercase; }
        .logo span { color: var(--p); }

        .tabs { display: flex; gap: 5px; }
        .tab-link {
            padding: 8px 16px; border-radius: 10px;
            color: #aaa; font-weight: 600; font-size: 0.85rem;
            text-decoration: none; transition: var(--ts);
        }
        .tab-link:hover, .tab-link.active { color: white; background: rgba(255,255,255,0.05); }
        .tab-link.active { color: var(--p); border: 1px solid rgba(0, 210, 255, 0.2); }

        /* --- –ì–†–ò–î –ö–û–ù–¢–ï–ù–¢–£ --- */
        .layout {
            display: grid; grid-template-columns: 1fr 300px;
            max-width: 1400px; margin: 30px auto; padding: 0 30px; gap: 30px;
        }

        .card {
            background: var(--card); border: 1px solid var(--border);
            border-radius: 24px; padding: 30px; backdrop-filter: blur(10px);
            margin-bottom: 25px;
        }

        /* --- –°–ò–°–¢–ï–ú–ê –î–†–£–ó–Ü–í --- */
        .sidebar-title {
            font-size: 0.7rem; font-weight: 800; color: #555;
            text-transform: uppercase; letter-spacing: 2px; margin-bottom: 20px;
            display: flex; justify-content: space-between;
        }

        .friend-item {
            display: flex; align-items: center; gap: 12px; padding: 10px;
            border-radius: 14px; transition: 0.3s; cursor: pointer;
        }
        .friend-item:hover { background: rgba(255,255,255,0.03); }
        .friend-head { width: 32px; height: 32px; border-radius: 6px; }
        .friend-info b { font-size: 0.85rem; display: block; }
        .friend-info span { font-size: 0.7rem; color: #00ff88; opacity: 0.8; }

        .add-friend-input {
            width: 100%; background: rgba(0,0,0,0.4); border: 1px solid var(--border);
            padding: 12px; border-radius: 12px; color: white; font-family: inherit;
            margin-bottom: 10px; box-sizing: border-box;
        }

        .btn-p {
            width: 100%; background: var(--p); color: black; border: none;
            padding: 12px; border-radius: 12px; font-weight: 800; cursor: pointer;
            text-transform: uppercase; font-size: 0.75rem;
        }

        /* --- USER SECTION --- */
        .user-meta { display: flex; align-items: center; gap: 12px; text-decoration: none; color: white; }
        .user-meta img { width: 32px; border-radius: 8px; border: 1px solid var(--p); }

        .logout-btn {
            background: none; border: 1px solid #ff4444; color: #ff4444;
            padding: 5px 10px; border-radius: 8px; font-size: 0.6rem;
            cursor: pointer; margin-left: 10px; transition: 0.3s;
        }
        .logout-btn:hover { background: #ff4444; color: white; }
    </style>
</head>
<body>

<header>
    <div class="nav-container">
        <div class="logo">WHALES<span>.</span></div>
        <nav class="tabs">
            <a href="nebula.html" class="tab-link">PROJECT: NEURAL BLUEPRINT</a>
            <a href="index.html" class="tab-link active">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="news.html" class="tab-link">–ù–æ–≤–∏–Ω–∏</a>
            <a href="wiki.html" class="tab-link">–í—ñ–∫—ñ</a>
            <a href="quests.html" class="tab-link">–ö–≤–µ—Å—Ç–∏</a>
            <a href="shop.html" class="tab-link">–ú–∞–≥–∞–∑–∏–Ω</a>
            <a href="discord.html" class="tab-link">Discord</a>
        </nav>
        <div style="display: flex; align-items: center;">
            <a href="profile.html" class="user-meta">
                <span id="u-name" style="font-size: 0.85rem; font-weight: 600;">–ì—Ä–∞–≤–µ—Ü—å</span>
                <img id="u-head" src="https://mc-heads.net/avatar/steve/32" alt="">
            </a>
            <button class="logout-btn" onclick="logout()">–í–∏–π—Ç–∏</button>
        </div>
    </div>
</header>

<div class="layout">
    <main>
        <div class="card" style="background: linear-gradient(to right, rgba(0,210,255,0.05), transparent);">
            <h1 style="margin:0; font-size: 2.5rem; letter-spacing: -1.5px;">–í—ñ—Ç–∞—î–º–æ, <span id="welcome-nick">–ì—Ä–∞–≤–µ—Ü—å</span>!</h1>
            <p style="color: #777; margin-top: 10px;">–¢–≤—ñ–π –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç Whales SMP –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏.</p>
        </div>

        <div class="card">
            <h3 style="margin-top:0">üì¢ –ü–æ–¥—ñ—ó –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ</h3>
            <p style="line-height: 1.6; color: #ccc;">–°–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –Ω–æ–≤–∏–Ω–∞–º–∏ —É –≤–∫–ª–∞–¥—Ü—ñ "–ù–æ–≤–∏–Ω–∏" —Ç–∞ –Ω–µ –∑–∞–±—É–≤–∞–π—Ç–µ –∑–∞–≥–ª—è–¥–∞—Ç–∏ –≤ "–ö–≤–µ—Å—Ç–∏", —â–æ–± –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –Ω–∞–≥–æ—Ä–æ–¥–∏.</p>
        </div>
    </main>

    <aside>
        <div class="card" style="padding: 20px;">
            <div class="sidebar-title">–î—Ä—É–∑—ñ <span>(0)</span></div>
            <input type="text" id="f-input" class="add-friend-input" placeholder="–ù—ñ–∫–Ω–µ–π–º –¥—Ä—É–≥–∞">
            <button class="btn-p" onclick="addFriend()">–î–æ–¥–∞—Ç–∏ –≤ –¥—Ä—É–∑—ñ</button>

            <div id="friends-box" style="margin-top: 20px;"></div>
        </div>

        <div class="card" style="padding: 20px; text-align: center;">
            <p style="font-size: 0.7rem; color: #555; text-transform: uppercase;">–°–∏—Å—Ç–µ–º–∞ –±–µ–∑–ø–µ–∫–∏</p>
            <span style="color: #00ff88; font-size: 0.8rem;">‚óè SHA-256 –ó–∞—Ö–∏—Å—Ç</span>
        </div>
    </aside>
</div>

<script>
// --- –ö–†–ò–¢–ò–ß–ù–ò–ô –°–ö–†–ò–ü–¢ –ü–ï–†–ï–í–Ü–†–ö–ò ---
(function checkAuth() {
    const nick = localStorage.getItem('playerNick');
    if (!nick) {
        // –Ø–∫—â–æ –Ω—ñ–∫–∞ –Ω–µ–º–∞—î ‚Äî –º–∏—Ç—Ç—î–≤–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—é
        window.location.replace("activate.html");
    } else {
        // –Ø–∫—â–æ –Ω—ñ–∫ —î ‚Äî –ø–æ–∫–∞–∑—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É
        document.body.style.display = 'block';
    }
})();

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
document.addEventListener('DOMContentLoaded', () => {
    const nick = localStorage.getItem('playerNick');
    if (nick) {
        document.getElementById('u-name').innerText = nick;
        document.getElementById('welcome-nick').innerText = nick;
        document.getElementById('u-head').src = `https://mc-heads.net/avatar/${nick}/32`;
        renderFriends();
    }
});

// –°–ò–°–¢–ï–ú–ê –î–†–£–ó–Ü–í
let friends = JSON.parse(localStorage.getItem('whales_friends')) || [];

function renderFriends() {
    const box = document.getElementById('friends-box');
    const titleCount = document.querySelector('.sidebar-title span');
    
    if (titleCount) titleCount.innerText = `(${friends.length})`;

    if (friends.length === 0) {
        box.innerHTML = '<p style="font-size:0.75rem; color:#444; text-align:center;">–°–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</p>';
        return;
    }

    box.innerHTML = friends.map(f => `
        <div class="friend-item">
            <img src="https://mc-heads.net/avatar/${f}/32" class="friend-head">
            <div class="friend-info">
                <b>${f}</b>
                <span>–æ–Ω–ª–∞–π–Ω</span>
            </div>
        </div>
    `).join('');
}

function addFriend() {
    const inp = document.getElementById('f-input');
    const name = inp.value.trim();
    if (name && !friends.includes(name)) {
        friends.push(name);
        localStorage.setItem('whales_friends', JSON.stringify(friends));
        inp.value = '';
        renderFriends();
    }
}

// –§—É–Ω–∫—Ü—ñ—è –≤–∏—Ö–æ–¥—É
function logout() {
    localStorage.removeItem('playerNick');
    window.location.replace("activate.html");
}
</script>
</body>
</html>